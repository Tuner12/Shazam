nohup: ignoring input
==== Processing with model: gigapath ====
initializing dataset
loading model checkpoint
  0%|          | 0/4 [00:00<?, ?it/s]
progress: 0/4
BRACS_1228
downsample [1. 1.]
downsampled_level_dim [107568  61197]
level_dim [107568  61197]
name BRACS_1228
patch_level 0
patch_size 224
save_path ../202502WSI/tst_PATCH_DIR/patches

feature extraction settings
transformations:  Compose(
    Resize(size=224, interpolation=bilinear, max_size=None, antialias=True)
    ToTensor()
    Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])
)
processing a total of 40 batches

  0%|          | 0/40 [00:00<?, ?it/s][A
  2%|▎         | 1/40 [00:11<07:12, 11.08s/it][A
  5%|▌         | 2/40 [00:19<05:55,  9.36s/it][A
  8%|▊         | 3/40 [00:25<04:57,  8.04s/it][A
 10%|█         | 4/40 [00:32<04:25,  7.39s/it][A
 12%|█▎        | 5/40 [00:38<04:07,  7.07s/it][A
 15%|█▌        | 6/40 [00:45<03:53,  6.85s/it][A
 18%|█▊        | 7/40 [00:51<03:43,  6.77s/it][A
 20%|██        | 8/40 [00:58<03:33,  6.66s/it][A
 22%|██▎       | 9/40 [01:04<03:24,  6.60s/it][A
 25%|██▌       | 10/40 [01:10<03:16,  6.56s/it][A
 28%|██▊       | 11/40 [01:17<03:09,  6.53s/it][A
 30%|███       | 12/40 [01:24<03:03,  6.55s/it][A
 32%|███▎      | 13/40 [01:30<02:56,  6.54s/it][A
 35%|███▌      | 14/40 [01:37<02:50,  6.56s/it][A
 38%|███▊      | 15/40 [01:43<02:44,  6.58s/it][A
 40%|████      | 16/40 [01:50<02:37,  6.56s/it][A
 42%|████▎     | 17/40 [01:56<02:30,  6.55s/it][A
 45%|████▌     | 18/40 [02:03<02:24,  6.55s/it][A
 48%|████▊     | 19/40 [02:09<02:17,  6.54s/it][A
 50%|█████     | 20/40 [02:16<02:11,  6.55s/it][A
 52%|█████▎    | 21/40 [02:23<02:04,  6.56s/it][A
 55%|█████▌    | 22/40 [02:29<01:58,  6.58s/it][A
 57%|█████▊    | 23/40 [02:36<01:52,  6.59s/it][A
 60%|██████    | 24/40 [02:42<01:45,  6.60s/it][A
 62%|██████▎   | 25/40 [02:49<01:39,  6.60s/it][A
 65%|██████▌   | 26/40 [02:56<01:32,  6.60s/it][A
 68%|██████▊   | 27/40 [03:02<01:25,  6.60s/it][A
 70%|███████   | 28/40 [03:09<01:19,  6.59s/it][A
 72%|███████▎  | 29/40 [03:15<01:12,  6.59s/it][A
 75%|███████▌  | 30/40 [03:22<01:05,  6.59s/it][A
 78%|███████▊  | 31/40 [03:29<00:59,  6.59s/it][A
 80%|████████  | 32/40 [03:35<00:52,  6.60s/it][A
 82%|████████▎ | 33/40 [03:42<00:46,  6.60s/it][A
 85%|████████▌ | 34/40 [03:48<00:39,  6.60s/it][A
 88%|████████▊ | 35/40 [03:55<00:32,  6.59s/it][A
 90%|█████████ | 36/40 [04:02<00:26,  6.59s/it][A
 92%|█████████▎| 37/40 [04:08<00:19,  6.60s/it][A
 95%|█████████▌| 38/40 [04:15<00:13,  6.60s/it][A
 98%|█████████▊| 39/40 [04:21<00:06,  6.60s/it][A
100%|██████████| 40/40 [04:23<00:00,  4.97s/it][A100%|██████████| 40/40 [04:23<00:00,  6.58s/it]
 25%|██▌       | 1/4 [04:23<13:10, 263.54s/it]
computing features for ../202502WSI/tst_features/gigapath_features/h5_files/BRACS_1228.h5 took 263.1662173271179 s
features size:  (20058, 1536)
coordinates size:  (20058, 2)

progress: 1/4
BRACS_1283
downsample [1. 1.]
downsampled_level_dim [177288  79857]
level_dim [177288  79857]
name BRACS_1283
patch_level 0
patch_size 224
save_path ../202502WSI/tst_PATCH_DIR/patches

feature extraction settings
transformations:  Compose(
    Resize(size=224, interpolation=bilinear, max_size=None, antialias=True)
    ToTensor()
    Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])
)
processing a total of 26 batches

  0%|          | 0/26 [00:00<?, ?it/s][A
  4%|▍         | 1/26 [00:10<04:11, 10.04s/it][A
  8%|▊         | 2/26 [00:16<03:10,  7.95s/it][A
 12%|█▏        | 3/26 [00:22<02:47,  7.28s/it][A
 15%|█▌        | 4/26 [00:29<02:34,  7.01s/it][A
 19%|█▉        | 5/26 [00:36<02:23,  6.83s/it][A
 23%|██▎       | 6/26 [00:42<02:14,  6.73s/it][A
 27%|██▋       | 7/26 [00:49<02:06,  6.68s/it][A
 31%|███       | 8/26 [00:55<01:59,  6.65s/it][A
 35%|███▍      | 9/26 [01:02<01:52,  6.63s/it][A
 38%|███▊      | 10/26 [01:09<01:46,  6.63s/it][A
 42%|████▏     | 11/26 [01:15<01:39,  6.63s/it][A
 46%|████▌     | 12/26 [01:22<01:32,  6.62s/it][A
 50%|█████     | 13/26 [01:28<01:25,  6.61s/it][A
 54%|█████▍    | 14/26 [01:35<01:19,  6.60s/it][A
 58%|█████▊    | 15/26 [01:42<01:12,  6.60s/it][A
 62%|██████▏   | 16/26 [01:48<01:05,  6.58s/it][A
 65%|██████▌   | 17/26 [01:55<00:59,  6.59s/it][A
 69%|██████▉   | 18/26 [02:01<00:52,  6.60s/it][A
 73%|███████▎  | 19/26 [02:08<00:46,  6.59s/it][A
 77%|███████▋  | 20/26 [02:14<00:39,  6.59s/it][A
 81%|████████  | 21/26 [02:21<00:32,  6.60s/it][A
 85%|████████▍ | 22/26 [02:28<00:26,  6.60s/it][A
 88%|████████▊ | 23/26 [02:34<00:19,  6.59s/it][A
 92%|█████████▏| 24/26 [02:41<00:13,  6.60s/it][A
 96%|█████████▌| 25/26 [02:47<00:06,  6.61s/it][A
100%|██████████| 26/26 [02:51<00:00,  5.70s/it][A100%|██████████| 26/26 [02:51<00:00,  6.60s/it]
 50%|█████     | 2/4 [07:15<06:59, 209.57s/it]
computing features for ../202502WSI/tst_features/gigapath_features/h5_files/BRACS_1283.h5 took 171.67000341415405 s
features size:  (13079, 1536)
coordinates size:  (13079, 2)

progress: 2/4
BRACS_1284
downsample [1. 1.]
downsampled_level_dim [89640 81211]
level_dim [89640 81211]
name BRACS_1284
patch_level 0
patch_size 224
save_path ../202502WSI/tst_PATCH_DIR/patches

feature extraction settings
transformations:  Compose(
    Resize(size=224, interpolation=bilinear, max_size=None, antialias=True)
    ToTensor()
    Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])
)
processing a total of 34 batches

  0%|          | 0/34 [00:00<?, ?it/s][A
  3%|▎         | 1/34 [00:09<05:14,  9.52s/it][A
  6%|▌         | 2/34 [00:16<04:08,  7.75s/it][A
  9%|▉         | 3/34 [00:22<03:42,  7.19s/it][A
 12%|█▏        | 4/34 [00:29<03:27,  6.90s/it][A
 15%|█▍        | 5/34 [00:35<03:15,  6.74s/it][A
 18%|█▊        | 6/34 [00:42<03:07,  6.69s/it][A
 21%|██        | 7/34 [00:48<02:59,  6.66s/it][A
 24%|██▎       | 8/34 [00:55<02:52,  6.65s/it][A
 26%|██▋       | 9/34 [01:01<02:45,  6.63s/it][A
 29%|██▉       | 10/34 [01:08<02:38,  6.62s/it][A
 32%|███▏      | 11/34 [01:15<02:32,  6.61s/it][A
 35%|███▌      | 12/34 [01:21<02:25,  6.61s/it][A
 38%|███▊      | 13/34 [01:28<02:18,  6.61s/it][A
 41%|████      | 14/34 [01:34<02:12,  6.61s/it][A
 44%|████▍     | 15/34 [01:41<02:05,  6.61s/it][A
 47%|████▋     | 16/34 [01:48<01:58,  6.60s/it][A
 50%|█████     | 17/34 [01:54<01:52,  6.59s/it][A
 53%|█████▎    | 18/34 [02:01<01:45,  6.60s/it][A
 56%|█████▌    | 19/34 [02:07<01:38,  6.59s/it][A
 59%|█████▉    | 20/34 [02:14<01:32,  6.60s/it][A
 62%|██████▏   | 21/34 [02:21<01:25,  6.60s/it][A
 65%|██████▍   | 22/34 [02:27<01:19,  6.60s/it][A
 68%|██████▊   | 23/34 [02:34<01:12,  6.60s/it][A
 71%|███████   | 24/34 [02:40<01:06,  6.60s/it][A
 74%|███████▎  | 25/34 [02:47<00:59,  6.60s/it][A
 76%|███████▋  | 26/34 [02:54<00:52,  6.61s/it][A
 79%|███████▉  | 27/34 [03:00<00:46,  6.60s/it][A
 82%|████████▏ | 28/34 [03:07<00:39,  6.61s/it][A
 85%|████████▌ | 29/34 [03:13<00:33,  6.60s/it][A
 88%|████████▊ | 30/34 [03:20<00:26,  6.61s/it][A
 91%|█████████ | 31/34 [03:27<00:19,  6.61s/it][A
 94%|█████████▍| 32/34 [03:33<00:13,  6.61s/it][A
 97%|█████████▋| 33/34 [03:40<00:06,  6.61s/it][A
100%|██████████| 34/34 [03:46<00:00,  6.54s/it][A100%|██████████| 34/34 [03:46<00:00,  6.67s/it]
 75%|███████▌  | 3/4 [11:02<03:37, 217.51s/it]
computing features for ../202502WSI/tst_features/gigapath_features/h5_files/BRACS_1284.h5 took 226.82117223739624 s
features size:  (17390, 1536)
coordinates size:  (17390, 2)

progress: 3/4
BRACS_1286
downsample [1. 1.]
downsampled_level_dim [125496  88572]
level_dim [125496  88572]
name BRACS_1286
patch_level 0
patch_size 224
save_path ../202502WSI/tst_PATCH_DIR/patches

feature extraction settings
transformations:  Compose(
    Resize(size=224, interpolation=bilinear, max_size=None, antialias=True)
    ToTensor()
    Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])
)
processing a total of 73 batches

  0%|          | 0/73 [00:00<?, ?it/s][A
  1%|▏         | 1/73 [00:11<13:55, 11.61s/it][A
  3%|▎         | 2/73 [00:18<10:14,  8.65s/it][A
  4%|▍         | 3/73 [00:24<09:00,  7.72s/it][A
  5%|▌         | 4/73 [00:31<08:22,  7.29s/it][A
  7%|▋         | 5/73 [00:37<07:57,  7.02s/it][A
  8%|▊         | 6/73 [00:44<07:40,  6.88s/it][A
 10%|▉         | 7/73 [00:51<07:31,  6.84s/it][A
 11%|█         | 8/73 [00:57<07:19,  6.76s/it][A
 12%|█▏        | 9/73 [01:04<07:09,  6.72s/it][A
 14%|█▎        | 10/73 [01:11<07:00,  6.68s/it][A
 15%|█▌        | 11/73 [01:17<06:52,  6.66s/it][A
 16%|█▋        | 12/73 [01:24<06:44,  6.63s/it][A
 18%|█▊        | 13/73 [01:30<06:36,  6.61s/it][A
 19%|█▉        | 14/73 [01:37<06:30,  6.61s/it][A
 21%|██        | 15/73 [01:44<06:23,  6.61s/it][A
 22%|██▏       | 16/73 [01:50<06:16,  6.61s/it][A
 23%|██▎       | 17/73 [01:57<06:10,  6.61s/it][A
 25%|██▍       | 18/73 [02:03<06:03,  6.60s/it][A
 26%|██▌       | 19/73 [02:10<05:55,  6.59s/it][A
 27%|██▋       | 20/73 [02:17<05:49,  6.59s/it][A
 29%|██▉       | 21/73 [02:23<05:42,  6.59s/it][A
 30%|███       | 22/73 [02:30<05:35,  6.58s/it][A
 32%|███▏      | 23/73 [02:37<05:34,  6.68s/it][A
 33%|███▎      | 24/73 [02:43<05:26,  6.66s/it][A
 34%|███▍      | 25/73 [02:50<05:18,  6.64s/it][A
 36%|███▌      | 26/73 [02:56<05:11,  6.63s/it][A
 37%|███▋      | 27/73 [03:03<05:04,  6.62s/it][A
 38%|███▊      | 28/73 [03:10<04:58,  6.62s/it][A
 40%|███▉      | 29/73 [03:16<04:50,  6.61s/it][A
 41%|████      | 30/73 [03:23<04:43,  6.60s/it][A
 42%|████▏     | 31/73 [03:29<04:36,  6.59s/it][A
 44%|████▍     | 32/73 [03:36<04:29,  6.58s/it][A
 45%|████▌     | 33/73 [03:43<04:23,  6.59s/it][A
 47%|████▋     | 34/73 [03:49<04:16,  6.58s/it][A
 48%|████▊     | 35/73 [03:56<04:10,  6.59s/it][A
 49%|████▉     | 36/73 [04:02<04:04,  6.60s/it][A
 51%|█████     | 37/73 [04:09<03:57,  6.60s/it][A
 52%|█████▏    | 38/73 [04:16<03:50,  6.60s/it][A
 53%|█████▎    | 39/73 [04:22<03:44,  6.60s/it][A
 55%|█████▍    | 40/73 [04:29<03:37,  6.60s/it][A
 56%|█████▌    | 41/73 [04:35<03:31,  6.60s/it][A
 58%|█████▊    | 42/73 [04:42<03:24,  6.61s/it][A
 59%|█████▉    | 43/73 [04:49<03:18,  6.61s/it][A
 60%|██████    | 44/73 [04:55<03:11,  6.60s/it][A
 62%|██████▏   | 45/73 [05:03<03:04,  6.59s/it][A
 63%|██████▎   | 46/73 [05:09<03:04,  6.82s/it][A
 64%|██████▍   | 47/73 [05:16<02:55,  6.75s/it][A
 66%|██████▌   | 48/73 [05:22<02:47,  6.71s/it][A
 67%|██████▋   | 49/73 [05:29<02:40,  6.67s/it][A
 68%|██████▊   | 50/73 [05:35<02:32,  6.65s/it][A
 70%|██████▉   | 51/73 [05:42<02:25,  6.63s/it][A
 71%|███████   | 52/73 [05:49<02:18,  6.61s/it][A
 73%|███████▎  | 53/73 [05:55<02:12,  6.61s/it][A
 74%|███████▍  | 54/73 [06:02<02:05,  6.61s/it][A
 75%|███████▌  | 55/73 [06:08<01:58,  6.61s/it][A
 77%|███████▋  | 56/73 [06:15<01:52,  6.60s/it][A
 78%|███████▊  | 57/73 [06:22<01:45,  6.60s/it][A
 79%|███████▉  | 58/73 [06:28<01:39,  6.60s/it][A
 81%|████████  | 59/73 [06:35<01:32,  6.60s/it][A
 82%|████████▏ | 60/73 [06:41<01:25,  6.60s/it][A
 84%|████████▎ | 61/73 [06:48<01:19,  6.60s/it][A
 85%|████████▍ | 62/73 [06:55<01:12,  6.59s/it][A
 86%|████████▋ | 63/73 [07:01<01:05,  6.59s/it][A
 88%|████████▊ | 64/73 [07:08<00:59,  6.60s/it][A
 89%|████████▉ | 65/73 [07:14<00:52,  6.60s/it][A
 90%|█████████ | 66/73 [07:21<00:46,  6.60s/it][A
 92%|█████████▏| 67/73 [07:28<00:39,  6.64s/it][A
 93%|█████████▎| 68/73 [07:34<00:33,  6.62s/it][A
 95%|█████████▍| 69/73 [07:41<00:26,  6.61s/it][A
 96%|█████████▌| 70/73 [07:47<00:19,  6.60s/it][A
 97%|█████████▋| 71/73 [07:54<00:13,  6.60s/it][A
 99%|█████████▊| 72/73 [08:01<00:06,  6.60s/it][A
100%|██████████| 73/73 [08:06<00:00,  6.23s/it][A100%|██████████| 73/73 [08:06<00:00,  6.67s/it]
100%|██████████| 4/4 [19:09<00:00, 323.88s/it]100%|██████████| 4/4 [19:09<00:00, 287.31s/it]

computing features for ../202502WSI/tst_features/gigapath_features/h5_files/BRACS_1286.h5 took 486.64020824432373 s
features size:  (37280, 1536)
coordinates size:  (37280, 2)
==== Processing with model: uni_v1 ====
/ailab/public/pjlab-smarthealth03/leiwenhui/YushengTan/CLAM/models/builder.py:92: FutureWarning: You are using `torch.load` with `weights_only=False` (the current default value), which uses the default pickle module implicitly. It is possible to construct malicious pickle data which will execute arbitrary code during unpickling (See https://github.com/pytorch/pytorch/blob/main/SECURITY.md#untrusted-models for more details). In a future release, the default value for `weights_only` will be flipped to `True`. This limits the functions that could be executed during unpickling. Arbitrary objects will no longer be allowed to be loaded via this mode unless they are explicitly allowlisted by the user via `torch.serialization.add_safe_globals`. We recommend you start setting `weights_only=True` for any use case where you don't have full control of the loaded file. Please open an issue on GitHub for any issues related to this experimental feature.
  model.load_state_dict(torch.load(UNI_CKPT_PATH, map_location="cpu"), strict=True)
initializing dataset
loading model checkpoint
  0%|          | 0/4 [00:00<?, ?it/s]
progress: 0/4
BRACS_1228
downsample [1. 1.]
downsampled_level_dim [107568  61197]
level_dim [107568  61197]
name BRACS_1228
patch_level 0
patch_size 224
save_path ../202502WSI/tst_PATCH_DIR/patches

feature extraction settings
transformations:  Compose(
    Resize(size=224, interpolation=bilinear, max_size=None, antialias=True)
    ToTensor()
    Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])
)
processing a total of 40 batches

  0%|          | 0/40 [00:00<?, ?it/s][A
  2%|▎         | 1/40 [00:05<03:16,  5.04s/it][A
  5%|▌         | 2/40 [00:06<01:59,  3.15s/it][A
  8%|▊         | 3/40 [00:08<01:35,  2.59s/it][A
 10%|█         | 4/40 [00:10<01:22,  2.29s/it][A
 12%|█▎        | 5/40 [00:12<01:15,  2.17s/it][A
 15%|█▌        | 6/40 [00:14<01:10,  2.07s/it][A
 18%|█▊        | 7/40 [00:16<01:06,  2.01s/it][A
 20%|██        | 8/40 [00:18<01:02,  1.95s/it][A
 22%|██▎       | 9/40 [00:20<01:00,  1.95s/it][A
 25%|██▌       | 10/40 [00:21<00:57,  1.92s/it][A
 28%|██▊       | 11/40 [00:23<00:55,  1.93s/it][A
 30%|███       | 12/40 [00:25<00:53,  1.90s/it][A
 32%|███▎      | 13/40 [00:27<00:51,  1.92s/it][A
 35%|███▌      | 14/40 [00:29<00:50,  1.96s/it][A
 38%|███▊      | 15/40 [00:31<00:48,  1.92s/it][A
 40%|████      | 16/40 [00:33<00:46,  1.94s/it][A
 42%|████▎     | 17/40 [00:35<00:43,  1.91s/it][A
 45%|████▌     | 18/40 [00:37<00:42,  1.93s/it][A
 48%|████▊     | 19/40 [00:39<00:40,  1.90s/it][A
 50%|█████     | 20/40 [00:41<00:38,  1.92s/it][A
 52%|█████▎    | 21/40 [00:43<00:36,  1.90s/it][A
 55%|█████▌    | 22/40 [00:44<00:33,  1.88s/it][A
 57%|█████▊    | 23/40 [00:46<00:31,  1.87s/it][A
 60%|██████    | 24/40 [00:48<00:29,  1.86s/it][A
 62%|██████▎   | 25/40 [00:50<00:27,  1.86s/it][A
 65%|██████▌   | 26/40 [00:52<00:26,  1.87s/it][A
 68%|██████▊   | 27/40 [00:54<00:24,  1.87s/it][A
 70%|███████   | 28/40 [00:56<00:22,  1.87s/it][A
 72%|███████▎  | 29/40 [00:57<00:20,  1.86s/it][A
 75%|███████▌  | 30/40 [00:59<00:18,  1.86s/it][A
 78%|███████▊  | 31/40 [01:01<00:16,  1.86s/it][A
 80%|████████  | 32/40 [01:03<00:14,  1.86s/it][A
 82%|████████▎ | 33/40 [01:05<00:12,  1.86s/it][A
 85%|████████▌ | 34/40 [01:07<00:11,  1.86s/it][A
 88%|████████▊ | 35/40 [01:09<00:09,  1.86s/it][A
 90%|█████████ | 36/40 [01:10<00:07,  1.85s/it][A
 92%|█████████▎| 37/40 [01:12<00:05,  1.85s/it][A
 95%|█████████▌| 38/40 [01:14<00:03,  1.86s/it][A
 98%|█████████▊| 39/40 [01:16<00:01,  1.85s/it][A
100%|██████████| 40/40 [01:16<00:00,  1.40s/it][A100%|██████████| 40/40 [01:16<00:00,  1.92s/it]
 25%|██▌       | 1/4 [01:17<03:51, 77.00s/it]
computing features for ../202502WSI/tst_features/uni_v1_features/h5_files/BRACS_1228.h5 took 76.88394331932068 s
features size:  (20058, 1024)
coordinates size:  (20058, 2)

progress: 1/4
BRACS_1283
downsample [1. 1.]
downsampled_level_dim [177288  79857]
level_dim [177288  79857]
name BRACS_1283
patch_level 0
patch_size 224
save_path ../202502WSI/tst_PATCH_DIR/patches

feature extraction settings
transformations:  Compose(
    Resize(size=224, interpolation=bilinear, max_size=None, antialias=True)
    ToTensor()
    Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])
)
processing a total of 26 batches

  0%|          | 0/26 [00:00<?, ?it/s][A
  4%|▍         | 1/26 [00:04<02:02,  4.88s/it][A
  8%|▊         | 2/26 [00:06<01:14,  3.10s/it][A
 12%|█▏        | 3/26 [00:08<00:58,  2.53s/it][A
 15%|█▌        | 4/26 [00:10<00:49,  2.25s/it][A
 19%|█▉        | 5/26 [00:12<00:44,  2.11s/it][A
 23%|██▎       | 6/26 [00:14<00:40,  2.02s/it][A
 27%|██▋       | 7/26 [00:15<00:37,  1.96s/it][A
 31%|███       | 8/26 [00:17<00:34,  1.92s/it][A
 35%|███▍      | 9/26 [00:19<00:32,  1.90s/it][A
 38%|███▊      | 10/26 [00:21<00:30,  1.88s/it][A
 42%|████▏     | 11/26 [00:23<00:28,  1.89s/it][A
 46%|████▌     | 12/26 [00:25<00:26,  1.89s/it][A
 50%|█████     | 13/26 [00:27<00:24,  1.88s/it][A
 54%|█████▍    | 14/26 [00:28<00:22,  1.87s/it][A
 58%|█████▊    | 15/26 [00:30<00:20,  1.86s/it][A
 62%|██████▏   | 16/26 [00:32<00:18,  1.86s/it][A
 65%|██████▌   | 17/26 [00:34<00:16,  1.86s/it][A
 69%|██████▉   | 18/26 [00:36<00:14,  1.86s/it][A
 73%|███████▎  | 19/26 [00:38<00:13,  1.86s/it][A
 77%|███████▋  | 20/26 [00:40<00:11,  1.86s/it][A
 81%|████████  | 21/26 [00:41<00:09,  1.86s/it][A
 85%|████████▍ | 22/26 [00:43<00:07,  1.85s/it][A
 88%|████████▊ | 23/26 [00:45<00:05,  1.86s/it][A
 92%|█████████▏| 24/26 [00:47<00:03,  1.86s/it][A
 96%|█████████▌| 25/26 [00:49<00:01,  1.86s/it][A
100%|██████████| 26/26 [00:50<00:00,  1.60s/it][A100%|██████████| 26/26 [00:50<00:00,  1.94s/it]
 50%|█████     | 2/4 [02:07<02:02, 61.46s/it]
computing features for ../202502WSI/tst_features/uni_v1_features/h5_files/BRACS_1283.h5 took 50.522220849990845 s
features size:  (13079, 1024)
coordinates size:  (13079, 2)

progress: 2/4
BRACS_1284
downsample [1. 1.]
downsampled_level_dim [89640 81211]
level_dim [89640 81211]
name BRACS_1284
patch_level 0
patch_size 224
save_path ../202502WSI/tst_PATCH_DIR/patches

feature extraction settings
transformations:  Compose(
    Resize(size=224, interpolation=bilinear, max_size=None, antialias=True)
    ToTensor()
    Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])
)
processing a total of 34 batches

  0%|          | 0/34 [00:00<?, ?it/s][A
  3%|▎         | 1/34 [00:04<02:23,  4.35s/it][A
  6%|▌         | 2/34 [00:06<01:32,  2.89s/it][A
  9%|▉         | 3/34 [00:08<01:14,  2.41s/it][A
 12%|█▏        | 4/34 [00:09<01:05,  2.19s/it][A
 15%|█▍        | 5/34 [00:12<01:03,  2.20s/it][A
 18%|█▊        | 6/34 [00:13<00:58,  2.08s/it][A
 21%|██        | 7/34 [00:15<00:54,  2.00s/it][A
 24%|██▎       | 8/34 [00:17<00:50,  1.95s/it][A
 26%|██▋       | 9/34 [00:19<00:47,  1.92s/it][A
 29%|██▉       | 10/34 [00:21<00:45,  1.90s/it][A
 32%|███▏      | 11/34 [00:23<00:43,  1.88s/it][A
 35%|███▌      | 12/34 [00:25<00:41,  1.87s/it][A
 38%|███▊      | 13/34 [00:26<00:39,  1.87s/it][A
 41%|████      | 14/34 [00:28<00:37,  1.87s/it][A
 44%|████▍     | 15/34 [00:30<00:35,  1.86s/it][A
 47%|████▋     | 16/34 [00:32<00:33,  1.86s/it][A
 50%|█████     | 17/34 [00:34<00:31,  1.85s/it][A
 53%|█████▎    | 18/34 [00:36<00:29,  1.85s/it][A
 56%|█████▌    | 19/34 [00:38<00:28,  1.88s/it][A
 59%|█████▉    | 20/34 [00:39<00:26,  1.87s/it][A
 62%|██████▏   | 21/34 [00:41<00:24,  1.87s/it][A
 65%|██████▍   | 22/34 [00:43<00:22,  1.86s/it][A
 68%|██████▊   | 23/34 [00:45<00:20,  1.86s/it][A
 71%|███████   | 24/34 [00:47<00:18,  1.86s/it][A
 74%|███████▎  | 25/34 [00:49<00:16,  1.86s/it][A
 76%|███████▋  | 26/34 [00:51<00:14,  1.86s/it][A
 79%|███████▉  | 27/34 [00:52<00:13,  1.86s/it][A
 82%|████████▏ | 28/34 [00:54<00:11,  1.86s/it][A
 85%|████████▌ | 29/34 [00:56<00:09,  1.86s/it][A
 88%|████████▊ | 30/34 [00:58<00:07,  1.86s/it][A
 91%|█████████ | 31/34 [01:00<00:05,  1.86s/it][A
 94%|█████████▍| 32/34 [01:02<00:03,  1.89s/it][A
 97%|█████████▋| 33/34 [01:04<00:01,  1.87s/it][A
100%|██████████| 34/34 [01:05<00:00,  1.85s/it][A100%|██████████| 34/34 [01:06<00:00,  1.94s/it]
 75%|███████▌  | 3/4 [03:13<01:03, 63.63s/it]
computing features for ../202502WSI/tst_features/uni_v1_features/h5_files/BRACS_1284.h5 took 66.10657858848572 s
features size:  (17390, 1024)
coordinates size:  (17390, 2)

progress: 3/4
BRACS_1286
downsample [1. 1.]
downsampled_level_dim [125496  88572]
level_dim [125496  88572]
name BRACS_1286
patch_level 0
patch_size 224
save_path ../202502WSI/tst_PATCH_DIR/patches

feature extraction settings
transformations:  Compose(
    Resize(size=224, interpolation=bilinear, max_size=None, antialias=True)
    ToTensor()
    Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])
)
processing a total of 73 batches

  0%|          | 0/73 [00:00<?, ?it/s][A
  1%|▏         | 1/73 [00:04<05:44,  4.78s/it][A
  3%|▎         | 2/73 [00:06<03:37,  3.06s/it][A
  4%|▍         | 3/73 [00:08<02:54,  2.50s/it][A
  5%|▌         | 4/73 [00:10<02:34,  2.24s/it][A
  7%|▋         | 5/73 [00:12<02:22,  2.10s/it][A
  8%|▊         | 6/73 [00:13<02:14,  2.01s/it][A
 10%|▉         | 7/73 [00:15<02:09,  1.96s/it][A
 11%|█         | 8/73 [00:17<02:04,  1.92s/it][A
 12%|█▏        | 9/73 [00:19<02:01,  1.90s/it][A
 14%|█▎        | 10/73 [00:21<01:59,  1.90s/it][A
 15%|█▌        | 11/73 [00:23<01:56,  1.88s/it][A
 16%|█▋        | 12/73 [00:25<01:54,  1.88s/it][A
 18%|█▊        | 13/73 [00:26<01:52,  1.87s/it][A
 19%|█▉        | 14/73 [00:28<01:50,  1.87s/it][A
 21%|██        | 15/73 [00:30<01:48,  1.86s/it][A
 22%|██▏       | 16/73 [00:32<01:45,  1.86s/it][A
 23%|██▎       | 17/73 [00:34<01:43,  1.86s/it][A
 25%|██▍       | 18/73 [00:36<01:41,  1.85s/it][A
 26%|██▌       | 19/73 [00:38<01:40,  1.85s/it][A
 27%|██▋       | 20/73 [00:39<01:38,  1.86s/it][A
 29%|██▉       | 21/73 [00:41<01:36,  1.86s/it][A
 30%|███       | 22/73 [00:43<01:35,  1.86s/it][A
 32%|███▏      | 23/73 [00:45<01:33,  1.87s/it][A
 33%|███▎      | 24/73 [00:47<01:31,  1.86s/it][A
 34%|███▍      | 25/73 [00:49<01:29,  1.86s/it][A
 36%|███▌      | 26/73 [00:51<01:27,  1.86s/it][A
 37%|███▋      | 27/73 [00:53<01:25,  1.86s/it][A
 38%|███▊      | 28/73 [00:54<01:23,  1.86s/it][A
 40%|███▉      | 29/73 [00:56<01:22,  1.87s/it][A
 41%|████      | 30/73 [00:58<01:20,  1.86s/it][A
 42%|████▏     | 31/73 [01:00<01:18,  1.86s/it][A
 44%|████▍     | 32/73 [01:02<01:16,  1.87s/it][A
 45%|████▌     | 33/73 [01:04<01:14,  1.87s/it][A
 47%|████▋     | 34/73 [01:06<01:13,  1.89s/it][A
 48%|████▊     | 35/73 [01:07<01:11,  1.88s/it][A
 49%|████▉     | 36/73 [01:09<01:09,  1.87s/it][A
 51%|█████     | 37/73 [01:11<01:07,  1.87s/it][A
 52%|█████▏    | 38/73 [01:13<01:05,  1.87s/it][A
 53%|█████▎    | 39/73 [01:15<01:03,  1.87s/it][A
 55%|█████▍    | 40/73 [01:17<01:01,  1.87s/it][A
 56%|█████▌    | 41/73 [01:19<00:59,  1.86s/it][A
 58%|█████▊    | 42/73 [01:21<00:58,  1.89s/it][A
 59%|█████▉    | 43/73 [01:23<00:56,  1.89s/it][A
 60%|██████    | 44/73 [01:24<00:54,  1.89s/it][A
 62%|██████▏   | 45/73 [01:26<00:52,  1.88s/it][A
 63%|██████▎   | 46/73 [01:28<00:50,  1.87s/it][A
 64%|██████▍   | 47/73 [01:30<00:48,  1.87s/it][A
 66%|██████▌   | 48/73 [01:32<00:46,  1.87s/it][A
 67%|██████▋   | 49/73 [01:34<00:44,  1.87s/it][A
 68%|██████▊   | 50/73 [01:36<00:44,  1.95s/it][A
 70%|██████▉   | 51/73 [01:38<00:42,  1.92s/it][A
 71%|███████   | 52/73 [01:40<00:40,  1.91s/it][A
 73%|███████▎  | 53/73 [01:41<00:37,  1.89s/it][A
 74%|███████▍  | 54/73 [01:43<00:35,  1.89s/it][A
 75%|███████▌  | 55/73 [01:45<00:33,  1.88s/it][A
 77%|███████▋  | 56/73 [01:47<00:32,  1.88s/it][A
 78%|███████▊  | 57/73 [01:49<00:30,  1.88s/it][A
 79%|███████▉  | 58/73 [01:51<00:28,  1.87s/it][A
 81%|████████  | 59/73 [01:53<00:26,  1.87s/it][A
 82%|████████▏ | 60/73 [01:55<00:24,  1.87s/it][A
 84%|████████▎ | 61/73 [01:56<00:22,  1.87s/it][A
 85%|████████▍ | 62/73 [01:58<00:20,  1.86s/it][A
 86%|████████▋ | 63/73 [02:00<00:18,  1.86s/it][A
 88%|████████▊ | 64/73 [02:02<00:16,  1.86s/it][A
 89%|████████▉ | 65/73 [02:04<00:15,  1.88s/it][A
 90%|█████████ | 66/73 [02:06<00:13,  1.88s/it][A
 92%|█████████▏| 67/73 [02:08<00:11,  1.87s/it][A
 93%|█████████▎| 68/73 [02:09<00:09,  1.87s/it][A
 95%|█████████▍| 69/73 [02:11<00:07,  1.87s/it][A
 96%|█████████▌| 70/73 [02:13<00:05,  1.87s/it][A
 97%|█████████▋| 71/73 [02:15<00:03,  1.86s/it][A
 99%|█████████▊| 72/73 [02:17<00:01,  1.87s/it][A
100%|██████████| 73/73 [02:18<00:00,  1.76s/it][A100%|██████████| 73/73 [02:19<00:00,  1.90s/it]
100%|██████████| 4/4 [05:33<00:00, 93.55s/it]100%|██████████| 4/4 [05:33<00:00, 83.30s/it]

computing features for ../202502WSI/tst_features/uni_v1_features/h5_files/BRACS_1286.h5 took 139.0478093624115 s
features size:  (37280, 1024)
coordinates size:  (37280, 2)
==== Processing with model: virchow2 ====
initializing dataset
loading model checkpoint
  0%|          | 0/4 [00:00<?, ?it/s]
progress: 0/4
BRACS_1228
downsample [1. 1.]
downsampled_level_dim [107568  61197]
level_dim [107568  61197]
name BRACS_1228
patch_level 0
patch_size 224
save_path ../202502WSI/tst_PATCH_DIR/patches

feature extraction settings
transformations:  Compose(
    Resize(size=224, interpolation=bilinear, max_size=None, antialias=True)
    ToTensor()
    Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])
)
processing a total of 40 batches

  0%|          | 0/40 [00:00<?, ?it/s][A
  2%|▎         | 1/40 [00:08<05:21,  8.25s/it][A
  5%|▌         | 2/40 [00:13<04:04,  6.44s/it][A
  8%|▊         | 3/40 [00:18<03:39,  5.92s/it][A
 10%|█         | 4/40 [00:23<03:23,  5.64s/it][A
 12%|█▎        | 5/40 [00:29<03:13,  5.52s/it][A
 15%|█▌        | 6/40 [00:34<03:03,  5.41s/it][A
 18%|█▊        | 7/40 [00:39<02:57,  5.38s/it][A
 20%|██        | 8/40 [00:44<02:50,  5.32s/it][A
 22%|██▎       | 9/40 [00:50<02:45,  5.32s/it][A
 25%|██▌       | 10/40 [00:55<02:38,  5.29s/it][A
 28%|██▊       | 11/40 [01:00<02:34,  5.32s/it][A
 30%|███       | 12/40 [01:06<02:28,  5.30s/it][A
 32%|███▎      | 13/40 [01:11<02:23,  5.33s/it][A
 35%|███▌      | 14/40 [01:16<02:18,  5.31s/it][A
 38%|███▊      | 15/40 [01:22<02:13,  5.33s/it][A
 40%|████      | 16/40 [01:27<02:07,  5.32s/it][A
 42%|████▎     | 17/40 [01:32<02:02,  5.34s/it][A
 45%|████▌     | 18/40 [01:38<01:57,  5.33s/it][A
 48%|████▊     | 19/40 [01:43<01:52,  5.38s/it][A
 50%|█████     | 20/40 [01:49<01:47,  5.39s/it][A
 52%|█████▎    | 21/40 [01:54<01:41,  5.36s/it][A
 55%|█████▌    | 22/40 [01:59<01:36,  5.38s/it][A
 57%|█████▊    | 23/40 [02:05<01:30,  5.35s/it][A
 60%|██████    | 24/40 [02:10<01:26,  5.43s/it][A
 62%|██████▎   | 25/40 [02:15<01:20,  5.39s/it][A
 65%|██████▌   | 26/40 [02:21<01:15,  5.36s/it][A
 68%|██████▊   | 27/40 [02:26<01:09,  5.35s/it][A
 70%|███████   | 28/40 [02:31<01:04,  5.33s/it][A
 72%|███████▎  | 29/40 [02:37<00:58,  5.33s/it][A
 75%|███████▌  | 30/40 [02:42<00:53,  5.32s/it][A
 78%|███████▊  | 31/40 [02:47<00:47,  5.30s/it][A
 80%|████████  | 32/40 [02:53<00:42,  5.30s/it][A
 82%|████████▎ | 33/40 [02:58<00:37,  5.29s/it][A
 85%|████████▌ | 34/40 [03:03<00:31,  5.28s/it][A
 88%|████████▊ | 35/40 [03:08<00:26,  5.28s/it][A
 90%|█████████ | 36/40 [03:14<00:21,  5.28s/it][A
 92%|█████████▎| 37/40 [03:19<00:15,  5.29s/it][A
 95%|█████████▌| 38/40 [03:24<00:10,  5.29s/it][A
 98%|█████████▊| 39/40 [03:30<00:05,  5.28s/it][A
100%|██████████| 40/40 [03:30<00:00,  3.98s/it][A100%|██████████| 40/40 [03:31<00:00,  5.28s/it]
 25%|██▌       | 1/4 [03:31<10:33, 211.20s/it]
computing features for ../202502WSI/tst_features/virchow2_features/h5_files/BRACS_1228.h5 took 211.06771802902222 s
features size:  (20058, 1280)
coordinates size:  (20058, 2)

progress: 1/4
BRACS_1283
downsample [1. 1.]
downsampled_level_dim [177288  79857]
level_dim [177288  79857]
name BRACS_1283
patch_level 0
patch_size 224
save_path ../202502WSI/tst_PATCH_DIR/patches

feature extraction settings
transformations:  Compose(
    Resize(size=224, interpolation=bilinear, max_size=None, antialias=True)
    ToTensor()
    Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])
)
processing a total of 26 batches

  0%|          | 0/26 [00:00<?, ?it/s][A
  4%|▍         | 1/26 [00:08<03:31,  8.47s/it][A
  8%|▊         | 2/26 [00:13<02:39,  6.66s/it][A
 12%|█▏        | 3/26 [00:19<02:18,  6.03s/it][A
 15%|█▌        | 4/26 [00:24<02:06,  5.73s/it][A
 19%|█▉        | 5/26 [00:29<01:57,  5.58s/it][A
 23%|██▎       | 6/26 [00:34<01:49,  5.47s/it][A
 27%|██▋       | 7/26 [00:40<01:42,  5.41s/it][A
 31%|███       | 8/26 [00:45<01:36,  5.38s/it][A
 35%|███▍      | 9/26 [00:50<01:31,  5.36s/it][A
 38%|███▊      | 10/26 [00:56<01:25,  5.34s/it][A
 42%|████▏     | 11/26 [01:01<01:20,  5.34s/it][A
 46%|████▌     | 12/26 [01:06<01:14,  5.32s/it][A
 50%|█████     | 13/26 [01:12<01:09,  5.32s/it][A
 54%|█████▍    | 14/26 [01:17<01:03,  5.31s/it][A
 58%|█████▊    | 15/26 [01:22<00:58,  5.31s/it][A
 62%|██████▏   | 16/26 [01:28<00:52,  5.30s/it][A
 65%|██████▌   | 17/26 [01:33<00:47,  5.29s/it][A
 69%|██████▉   | 18/26 [01:38<00:42,  5.29s/it][A
 73%|███████▎  | 19/26 [01:43<00:37,  5.30s/it][A
 77%|███████▋  | 20/26 [01:49<00:31,  5.29s/it][A
 81%|████████  | 21/26 [01:54<00:26,  5.29s/it][A
 85%|████████▍ | 22/26 [01:59<00:21,  5.30s/it][A
 88%|████████▊ | 23/26 [02:05<00:15,  5.29s/it][A
 92%|█████████▏| 24/26 [02:10<00:10,  5.35s/it][A
 96%|█████████▌| 25/26 [02:15<00:05,  5.33s/it][A
100%|██████████| 26/26 [02:18<00:00,  4.58s/it][A100%|██████████| 26/26 [02:18<00:00,  5.34s/it]
 50%|█████     | 2/4 [05:50<05:37, 168.86s/it]
computing features for ../202502WSI/tst_features/virchow2_features/h5_files/BRACS_1283.h5 took 139.11931610107422 s
features size:  (13079, 1280)
coordinates size:  (13079, 2)

progress: 2/4
BRACS_1284
downsample [1. 1.]
downsampled_level_dim [89640 81211]
level_dim [89640 81211]
name BRACS_1284
patch_level 0
patch_size 224
save_path ../202502WSI/tst_PATCH_DIR/patches

feature extraction settings
transformations:  Compose(
    Resize(size=224, interpolation=bilinear, max_size=None, antialias=True)
    ToTensor()
    Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])
)
processing a total of 34 batches

  0%|          | 0/34 [00:00<?, ?it/s][A
  3%|▎         | 1/34 [00:07<04:19,  7.87s/it][A
  6%|▌         | 2/34 [00:13<03:22,  6.34s/it][A
  9%|▉         | 3/34 [00:18<03:01,  5.85s/it][A
 12%|█▏        | 4/34 [00:23<02:49,  5.64s/it][A
 15%|█▍        | 5/34 [00:29<02:39,  5.51s/it][A
 18%|█▊        | 6/34 [00:34<02:32,  5.44s/it][A
 21%|██        | 7/34 [00:39<02:25,  5.39s/it][A
 24%|██▎       | 8/34 [00:44<02:19,  5.37s/it][A
 26%|██▋       | 9/34 [00:50<02:13,  5.35s/it][A
 29%|██▉       | 10/34 [00:55<02:07,  5.33s/it][A
 32%|███▏      | 11/34 [01:00<02:02,  5.32s/it][A
 35%|███▌      | 12/34 [01:06<01:56,  5.31s/it][A
 38%|███▊      | 13/34 [01:11<01:51,  5.30s/it][A
 41%|████      | 14/34 [01:16<01:46,  5.30s/it][A
 44%|████▍     | 15/34 [01:21<01:40,  5.30s/it][A
 47%|████▋     | 16/34 [01:27<01:35,  5.30s/it][A
 50%|█████     | 17/34 [01:32<01:30,  5.30s/it][A
 53%|█████▎    | 18/34 [01:37<01:24,  5.30s/it][A
 56%|█████▌    | 19/34 [01:43<01:19,  5.29s/it][A
 59%|█████▉    | 20/34 [01:48<01:14,  5.29s/it][A
 62%|██████▏   | 21/34 [01:53<01:08,  5.29s/it][A
 65%|██████▍   | 22/34 [01:59<01:03,  5.30s/it][A
 68%|██████▊   | 23/34 [02:04<00:58,  5.30s/it][A
 71%|███████   | 24/34 [02:09<00:52,  5.30s/it][A
 74%|███████▎  | 25/34 [02:14<00:47,  5.30s/it][A
 76%|███████▋  | 26/34 [02:20<00:42,  5.30s/it][A
 79%|███████▉  | 27/34 [02:25<00:37,  5.30s/it][A
 82%|████████▏ | 28/34 [02:30<00:31,  5.29s/it][A
 85%|████████▌ | 29/34 [02:36<00:26,  5.29s/it][A
 88%|████████▊ | 30/34 [02:41<00:21,  5.29s/it][A
 91%|█████████ | 31/34 [02:46<00:15,  5.29s/it][A
 94%|█████████▍| 32/34 [02:51<00:10,  5.29s/it][A
 97%|█████████▋| 33/34 [02:57<00:05,  5.29s/it][A
100%|██████████| 34/34 [03:02<00:00,  5.24s/it][A100%|██████████| 34/34 [03:02<00:00,  5.37s/it]
 75%|███████▌  | 3/4 [08:53<02:55, 175.14s/it]
computing features for ../202502WSI/tst_features/virchow2_features/h5_files/BRACS_1284.h5 took 182.46090245246887 s
features size:  (17390, 1280)
coordinates size:  (17390, 2)

progress: 3/4
BRACS_1286
downsample [1. 1.]
downsampled_level_dim [125496  88572]
level_dim [125496  88572]
name BRACS_1286
patch_level 0
patch_size 224
save_path ../202502WSI/tst_PATCH_DIR/patches

feature extraction settings
transformations:  Compose(
    Resize(size=224, interpolation=bilinear, max_size=None, antialias=True)
    ToTensor()
    Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])
)
processing a total of 73 batches

  0%|          | 0/73 [00:00<?, ?it/s][A
  1%|▏         | 1/73 [00:07<09:25,  7.86s/it][A
  3%|▎         | 2/73 [00:13<07:29,  6.34s/it][A
  4%|▍         | 3/73 [00:18<06:49,  5.85s/it][A
  5%|▌         | 4/73 [00:23<06:28,  5.63s/it][A
  7%|▋         | 5/73 [00:28<06:14,  5.50s/it][A
  8%|▊         | 6/73 [00:34<06:03,  5.43s/it][A
 10%|▉         | 7/73 [00:39<05:54,  5.38s/it][A
 11%|█         | 8/73 [00:44<05:47,  5.35s/it][A
 12%|█▏        | 9/73 [00:50<05:40,  5.33s/it][A
 14%|█▎        | 10/73 [00:55<05:34,  5.31s/it][A
 15%|█▌        | 11/73 [01:00<05:28,  5.30s/it][A
 16%|█▋        | 12/73 [01:05<05:23,  5.30s/it][A
 18%|█▊        | 13/73 [01:11<05:17,  5.30s/it][A
 19%|█▉        | 14/73 [01:16<05:12,  5.30s/it][A
 21%|██        | 15/73 [01:21<05:07,  5.30s/it][A
 22%|██▏       | 16/73 [01:27<05:02,  5.30s/it][A
 23%|██▎       | 17/73 [01:32<04:56,  5.29s/it][A
 25%|██▍       | 18/73 [01:37<04:51,  5.29s/it][A
 26%|██▌       | 19/73 [01:42<04:45,  5.29s/it][A
 27%|██▋       | 20/73 [01:48<04:40,  5.30s/it][A
 29%|██▉       | 21/73 [01:53<04:35,  5.30s/it][A
 30%|███       | 22/73 [01:58<04:30,  5.30s/it][A
 32%|███▏      | 23/73 [02:04<04:24,  5.29s/it][A
 33%|███▎      | 24/73 [02:09<04:19,  5.29s/it][A
 34%|███▍      | 25/73 [02:14<04:14,  5.30s/it][A
 36%|███▌      | 26/73 [02:20<04:08,  5.29s/it][A
 37%|███▋      | 27/73 [02:25<04:03,  5.29s/it][A
 38%|███▊      | 28/73 [02:30<03:57,  5.29s/it][A
 40%|███▉      | 29/73 [02:35<03:52,  5.29s/it][A
 41%|████      | 30/73 [02:41<03:47,  5.29s/it][A
 42%|████▏     | 31/73 [02:46<03:42,  5.29s/it][A
 44%|████▍     | 32/73 [02:51<03:36,  5.29s/it][A
 45%|████▌     | 33/73 [02:57<03:31,  5.29s/it][A
 47%|████▋     | 34/73 [03:02<03:26,  5.29s/it][A
 48%|████▊     | 35/73 [03:07<03:20,  5.29s/it][A
 49%|████▉     | 36/73 [03:12<03:15,  5.29s/it][A
 51%|█████     | 37/73 [03:18<03:10,  5.29s/it][A
 52%|█████▏    | 38/73 [03:23<03:05,  5.29s/it][A
 53%|█████▎    | 39/73 [03:28<02:59,  5.29s/it][A
 55%|█████▍    | 40/73 [03:34<02:54,  5.29s/it][A
 56%|█████▌    | 41/73 [03:39<02:49,  5.28s/it][A
 58%|█████▊    | 42/73 [03:44<02:43,  5.28s/it][A
 59%|█████▉    | 43/73 [03:50<02:40,  5.34s/it][A
 60%|██████    | 44/73 [03:55<02:34,  5.32s/it][A
 62%|██████▏   | 45/73 [04:00<02:28,  5.31s/it][A
 63%|██████▎   | 46/73 [04:06<02:23,  5.32s/it][A
 64%|██████▍   | 47/73 [04:11<02:18,  5.31s/it][A
 66%|██████▌   | 48/73 [04:16<02:12,  5.31s/it][A
 67%|██████▋   | 49/73 [04:21<02:07,  5.31s/it][A
 68%|██████▊   | 50/73 [04:27<02:01,  5.30s/it][A
 70%|██████▉   | 51/73 [04:32<01:56,  5.30s/it][A
 71%|███████   | 52/73 [04:37<01:51,  5.29s/it][A
 73%|███████▎  | 53/73 [04:43<01:45,  5.29s/it][A
 74%|███████▍  | 54/73 [04:48<01:40,  5.29s/it][A
 75%|███████▌  | 55/73 [04:53<01:35,  5.29s/it][A
 77%|███████▋  | 56/73 [04:58<01:29,  5.29s/it][A
 78%|███████▊  | 57/73 [05:04<01:24,  5.29s/it][A
 79%|███████▉  | 58/73 [05:09<01:19,  5.30s/it][A
 81%|████████  | 59/73 [05:14<01:14,  5.29s/it][A
 82%|████████▏ | 60/73 [05:20<01:08,  5.29s/it][A
 84%|████████▎ | 61/73 [05:25<01:03,  5.28s/it][A
 85%|████████▍ | 62/73 [05:30<00:58,  5.29s/it][A
 86%|████████▋ | 63/73 [05:35<00:52,  5.29s/it][A
 88%|████████▊ | 64/73 [05:41<00:47,  5.29s/it][A
 89%|████████▉ | 65/73 [05:46<00:42,  5.30s/it][A
 90%|█████████ | 66/73 [05:51<00:37,  5.30s/it][A
 92%|█████████▏| 67/73 [05:57<00:31,  5.30s/it][A
 93%|█████████▎| 68/73 [06:02<00:27,  5.41s/it][A
 95%|█████████▍| 69/73 [06:08<00:21,  5.50s/it][A
 96%|█████████▌| 70/73 [06:13<00:16,  5.43s/it][A
 97%|█████████▋| 71/73 [06:19<00:10,  5.38s/it][A
 99%|█████████▊| 72/73 [06:24<00:05,  5.36s/it][A
100%|██████████| 73/73 [06:28<00:00,  5.08s/it][A100%|██████████| 73/73 [06:29<00:00,  5.33s/it]
100%|██████████| 4/4 [15:22<00:00, 259.76s/it]100%|██████████| 4/4 [15:22<00:00, 230.63s/it]

computing features for ../202502WSI/tst_features/virchow2_features/h5_files/BRACS_1286.h5 took 389.10167169570923 s
features size:  (37280, 1280)
coordinates size:  (37280, 2)
==== Processing with model: phikon_v2 ====
initializing dataset
loading model checkpoint
  0%|          | 0/4 [00:00<?, ?it/s]
progress: 0/4
BRACS_1228
downsample [1. 1.]
downsampled_level_dim [107568  61197]
level_dim [107568  61197]
name BRACS_1228
patch_level 0
patch_size 224
save_path ../202502WSI/tst_PATCH_DIR/patches

feature extraction settings
transformations:  Compose(
    Resize(size=224, interpolation=bilinear, max_size=None, antialias=True)
    ToTensor()
    Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])
)
processing a total of 40 batches

  0%|          | 0/40 [00:00<?, ?it/s][A
  2%|▎         | 1/40 [00:06<04:19,  6.64s/it][A
  5%|▌         | 2/40 [00:10<03:04,  4.87s/it][A
  8%|▊         | 3/40 [00:12<02:10,  3.53s/it][A
 10%|█         | 4/40 [00:14<01:42,  2.86s/it][A
 12%|█▎        | 5/40 [00:15<01:28,  2.53s/it][A
 15%|█▌        | 6/40 [00:17<01:18,  2.30s/it][A
 18%|█▊        | 7/40 [00:19<01:10,  2.14s/it][A
 20%|██        | 8/40 [00:21<01:05,  2.04s/it][A
 22%|██▎       | 9/40 [00:23<01:01,  1.98s/it][A
 25%|██▌       | 10/40 [00:25<00:58,  1.94s/it][A
 28%|██▊       | 11/40 [00:26<00:55,  1.91s/it][A
 30%|███       | 12/40 [00:28<00:52,  1.89s/it][A
 32%|███▎      | 13/40 [00:30<00:50,  1.87s/it][A
 35%|███▌      | 14/40 [00:32<00:48,  1.86s/it][A
 38%|███▊      | 15/40 [00:34<00:46,  1.86s/it][A
 40%|████      | 16/40 [00:36<00:44,  1.85s/it][A
 42%|████▎     | 17/40 [00:38<00:42,  1.85s/it][A
 45%|████▌     | 18/40 [00:39<00:40,  1.85s/it][A
 48%|████▊     | 19/40 [00:41<00:38,  1.85s/it][A
 50%|█████     | 20/40 [00:43<00:36,  1.85s/it][A
 52%|█████▎    | 21/40 [00:45<00:35,  1.85s/it][A
 55%|█████▌    | 22/40 [00:47<00:33,  1.85s/it][A
 57%|█████▊    | 23/40 [00:49<00:31,  1.85s/it][A
 60%|██████    | 24/40 [00:51<00:29,  1.86s/it][A
 62%|██████▎   | 25/40 [00:52<00:27,  1.86s/it][A
 65%|██████▌   | 26/40 [00:54<00:26,  1.86s/it][A
 68%|██████▊   | 27/40 [00:56<00:24,  1.86s/it][A
 70%|███████   | 28/40 [00:58<00:22,  1.86s/it][A
 72%|███████▎  | 29/40 [01:00<00:20,  1.86s/it][A
 75%|███████▌  | 30/40 [01:02<00:18,  1.87s/it][A
 78%|███████▊  | 31/40 [01:04<00:16,  1.86s/it][A
 80%|████████  | 32/40 [01:05<00:14,  1.86s/it][A
 82%|████████▎ | 33/40 [01:07<00:13,  1.87s/it][A
 85%|████████▌ | 34/40 [01:09<00:11,  1.87s/it][A
 88%|████████▊ | 35/40 [01:11<00:09,  1.88s/it][A
 90%|█████████ | 36/40 [01:13<00:07,  1.89s/it][A
 92%|█████████▎| 37/40 [01:15<00:05,  1.90s/it][A
 95%|█████████▌| 38/40 [01:17<00:03,  1.89s/it][A
 98%|█████████▊| 39/40 [01:19<00:01,  1.88s/it][A
100%|██████████| 40/40 [01:19<00:00,  1.42s/it][A100%|██████████| 40/40 [01:19<00:00,  1.99s/it]
 25%|██▌       | 1/4 [01:20<04:00, 80.23s/it]
computing features for ../202502WSI/tst_features/phikon_v2_features/h5_files/BRACS_1228.h5 took 80.11252760887146 s
features size:  (20058, 1024)
coordinates size:  (20058, 2)

progress: 1/4
BRACS_1283
downsample [1. 1.]
downsampled_level_dim [177288  79857]
level_dim [177288  79857]
name BRACS_1283
patch_level 0
patch_size 224
save_path ../202502WSI/tst_PATCH_DIR/patches

feature extraction settings
transformations:  Compose(
    Resize(size=224, interpolation=bilinear, max_size=None, antialias=True)
    ToTensor()
    Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])
)
processing a total of 26 batches

  0%|          | 0/26 [00:00<?, ?it/s][A
  4%|▍         | 1/26 [00:04<01:49,  4.39s/it][A
  8%|▊         | 2/26 [00:06<01:10,  2.93s/it][A
 12%|█▏        | 3/26 [00:08<00:56,  2.44s/it][A
 15%|█▌        | 4/26 [00:10<00:48,  2.21s/it][A
 19%|█▉        | 5/26 [00:11<00:43,  2.09s/it][A
 23%|██▎       | 6/26 [00:13<00:40,  2.02s/it][A
 27%|██▋       | 7/26 [00:15<00:37,  1.97s/it][A
 31%|███       | 8/26 [00:17<00:34,  1.94s/it][A
 35%|███▍      | 9/26 [00:19<00:32,  1.91s/it][A
 38%|███▊      | 10/26 [00:21<00:30,  1.90s/it][A
 42%|████▏     | 11/26 [00:23<00:28,  1.91s/it][A
 46%|████▌     | 12/26 [00:25<00:26,  1.90s/it][A
 50%|█████     | 13/26 [00:26<00:24,  1.89s/it][A
 54%|█████▍    | 14/26 [00:28<00:22,  1.90s/it][A
 58%|█████▊    | 15/26 [00:30<00:20,  1.89s/it][A
 62%|██████▏   | 16/26 [00:32<00:18,  1.88s/it][A
 65%|██████▌   | 17/26 [00:34<00:16,  1.88s/it][A
 69%|██████▉   | 18/26 [00:36<00:15,  1.88s/it][A
 73%|███████▎  | 19/26 [00:38<00:13,  1.88s/it][A
 77%|███████▋  | 20/26 [00:40<00:11,  1.88s/it][A
 81%|████████  | 21/26 [00:41<00:09,  1.88s/it][A
 85%|████████▍ | 22/26 [00:43<00:07,  1.88s/it][A
 88%|████████▊ | 23/26 [00:45<00:05,  1.88s/it][A
 92%|█████████▏| 24/26 [00:47<00:03,  1.89s/it][A
 96%|█████████▌| 25/26 [00:49<00:01,  1.89s/it][A
100%|██████████| 26/26 [00:50<00:00,  1.63s/it][A100%|██████████| 26/26 [00:50<00:00,  1.95s/it]
 50%|█████     | 2/4 [02:10<02:05, 62.89s/it]
computing features for ../202502WSI/tst_features/phikon_v2_features/h5_files/BRACS_1283.h5 took 50.6560537815094 s
features size:  (13079, 1024)
coordinates size:  (13079, 2)

progress: 2/4
BRACS_1284
downsample [1. 1.]
downsampled_level_dim [89640 81211]
level_dim [89640 81211]
name BRACS_1284
patch_level 0
patch_size 224
save_path ../202502WSI/tst_PATCH_DIR/patches

feature extraction settings
transformations:  Compose(
    Resize(size=224, interpolation=bilinear, max_size=None, antialias=True)
    ToTensor()
    Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])
)
processing a total of 34 batches

  0%|          | 0/34 [00:00<?, ?it/s][A
  3%|▎         | 1/34 [00:04<02:19,  4.24s/it][A
  6%|▌         | 2/34 [00:06<01:31,  2.86s/it][A
  9%|▉         | 3/34 [00:08<01:14,  2.41s/it][A
 12%|█▏        | 4/34 [00:09<01:05,  2.20s/it][A
 15%|█▍        | 5/34 [00:11<01:00,  2.08s/it][A
 18%|█▊        | 6/34 [00:13<00:56,  2.01s/it][A
 21%|██        | 7/34 [00:15<00:53,  1.96s/it][A
 24%|██▎       | 8/34 [00:17<00:50,  1.93s/it][A
 26%|██▋       | 9/34 [00:19<00:47,  1.91s/it][A
 29%|██▉       | 10/34 [00:21<00:45,  1.90s/it][A
 32%|███▏      | 11/34 [00:22<00:43,  1.89s/it][A
 35%|███▌      | 12/34 [00:24<00:41,  1.89s/it][A
 38%|███▊      | 13/34 [00:26<00:39,  1.89s/it][A
 41%|████      | 14/34 [00:28<00:37,  1.88s/it][A
 44%|████▍     | 15/34 [00:30<00:35,  1.88s/it][A
 47%|████▋     | 16/34 [00:32<00:33,  1.88s/it][A
 50%|█████     | 17/34 [00:34<00:32,  1.89s/it][A
 53%|█████▎    | 18/34 [00:36<00:30,  1.89s/it][A
 56%|█████▌    | 19/34 [00:38<00:28,  1.92s/it][A
 59%|█████▉    | 20/34 [00:40<00:26,  1.92s/it][A
 62%|██████▏   | 21/34 [00:41<00:24,  1.91s/it][A
 65%|██████▍   | 22/34 [00:43<00:22,  1.90s/it][A
 68%|██████▊   | 23/34 [00:45<00:20,  1.89s/it][A
 71%|███████   | 24/34 [00:47<00:18,  1.90s/it][A
 74%|███████▎  | 25/34 [00:49<00:17,  1.89s/it][A
 76%|███████▋  | 26/34 [00:51<00:15,  1.89s/it][A
 79%|███████▉  | 27/34 [00:53<00:13,  1.90s/it][A
 82%|████████▏ | 28/34 [00:55<00:11,  1.90s/it][A
 85%|████████▌ | 29/34 [00:57<00:09,  1.90s/it][A
 88%|████████▊ | 30/34 [00:58<00:07,  1.90s/it][A
 91%|█████████ | 31/34 [01:00<00:05,  1.89s/it][A
 94%|█████████▍| 32/34 [01:02<00:03,  1.89s/it][A
 97%|█████████▋| 33/34 [01:04<00:01,  1.89s/it][A
100%|██████████| 34/34 [01:06<00:00,  1.86s/it][A100%|██████████| 34/34 [01:06<00:00,  1.96s/it]
 75%|███████▌  | 3/4 [03:17<01:04, 64.60s/it]
computing features for ../202502WSI/tst_features/phikon_v2_features/h5_files/BRACS_1284.h5 took 66.5198884010315 s
features size:  (17390, 1024)
coordinates size:  (17390, 2)

progress: 3/4
BRACS_1286
downsample [1. 1.]
downsampled_level_dim [125496  88572]
level_dim [125496  88572]
name BRACS_1286
patch_level 0
patch_size 224
save_path ../202502WSI/tst_PATCH_DIR/patches

feature extraction settings
transformations:  Compose(
    Resize(size=224, interpolation=bilinear, max_size=None, antialias=True)
    ToTensor()
    Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])
)
processing a total of 73 batches

  0%|          | 0/73 [00:00<?, ?it/s][A
  1%|▏         | 1/73 [00:04<05:30,  4.60s/it][A
  3%|▎         | 2/73 [00:06<03:33,  3.01s/it][A
  4%|▍         | 3/73 [00:08<02:54,  2.50s/it][A
  5%|▌         | 4/73 [00:10<02:35,  2.26s/it][A
  7%|▋         | 5/73 [00:12<02:24,  2.12s/it][A
  8%|▊         | 6/73 [00:14<02:16,  2.04s/it][A
 10%|▉         | 7/73 [00:15<02:11,  1.99s/it][A
 11%|█         | 8/73 [00:17<02:06,  1.95s/it][A
 12%|█▏        | 9/73 [00:19<02:03,  1.93s/it][A
 14%|█▎        | 10/73 [00:21<02:00,  1.92s/it][A
 15%|█▌        | 11/73 [00:23<01:58,  1.91s/it][A
 16%|█▋        | 12/73 [00:25<01:56,  1.91s/it][A
 18%|█▊        | 13/73 [00:27<01:54,  1.90s/it][A
 19%|█▉        | 14/73 [00:29<01:52,  1.90s/it][A
 21%|██        | 15/73 [00:31<01:49,  1.89s/it][A
 22%|██▏       | 16/73 [00:32<01:48,  1.90s/it][A
 23%|██▎       | 17/73 [00:34<01:46,  1.90s/it][A
 25%|██▍       | 18/73 [00:36<01:44,  1.89s/it][A
 26%|██▌       | 19/73 [00:38<01:42,  1.89s/it][A
 27%|██▋       | 20/73 [00:40<01:40,  1.89s/it][A
 29%|██▉       | 21/73 [00:42<01:38,  1.89s/it][A
 30%|███       | 22/73 [00:44<01:36,  1.89s/it][A
 32%|███▏      | 23/73 [00:46<01:34,  1.88s/it][A
 33%|███▎      | 24/73 [00:48<01:32,  1.89s/it][A
 34%|███▍      | 25/73 [00:49<01:30,  1.89s/it][A
 36%|███▌      | 26/73 [00:51<01:28,  1.89s/it][A
 37%|███▋      | 27/73 [00:53<01:26,  1.89s/it][A
 38%|███▊      | 28/73 [00:55<01:25,  1.89s/it][A
 40%|███▉      | 29/73 [00:57<01:23,  1.89s/it][A
 41%|████      | 30/73 [00:59<01:21,  1.89s/it][A
 42%|████▏     | 31/73 [01:01<01:19,  1.90s/it][A
 44%|████▍     | 32/73 [01:03<01:17,  1.90s/it][A
 45%|████▌     | 33/73 [01:05<01:15,  1.90s/it][A
 47%|████▋     | 34/73 [01:06<01:14,  1.90s/it][A
 48%|████▊     | 35/73 [01:08<01:12,  1.91s/it][A
 49%|████▉     | 36/73 [01:10<01:10,  1.90s/it][A
 51%|█████     | 37/73 [01:12<01:08,  1.89s/it][A
 52%|█████▏    | 38/73 [01:14<01:06,  1.89s/it][A
 53%|█████▎    | 39/73 [01:16<01:04,  1.89s/it][A
 55%|█████▍    | 40/73 [01:18<01:02,  1.89s/it][A
 56%|█████▌    | 41/73 [01:20<01:00,  1.89s/it][A
 58%|█████▊    | 42/73 [01:22<00:58,  1.90s/it][A
 59%|█████▉    | 43/73 [01:24<00:56,  1.89s/it][A
 60%|██████    | 44/73 [01:25<00:54,  1.89s/it][A
 62%|██████▏   | 45/73 [01:27<00:52,  1.88s/it][A
 63%|██████▎   | 46/73 [01:29<00:50,  1.89s/it][A
 64%|██████▍   | 47/73 [01:31<00:49,  1.89s/it][A
 66%|██████▌   | 48/73 [01:33<00:47,  1.89s/it][A
 67%|██████▋   | 49/73 [01:35<00:45,  1.89s/it][A
 68%|██████▊   | 50/73 [01:37<00:43,  1.89s/it][A
 70%|██████▉   | 51/73 [01:39<00:41,  1.89s/it][A
 71%|███████   | 52/73 [01:41<00:39,  1.89s/it][A
 73%|███████▎  | 53/73 [01:42<00:37,  1.89s/it][A
 74%|███████▍  | 54/73 [01:44<00:36,  1.90s/it][A
 75%|███████▌  | 55/73 [01:46<00:34,  1.90s/it][A
 77%|███████▋  | 56/73 [01:48<00:32,  1.91s/it][A
 78%|███████▊  | 57/73 [01:50<00:30,  1.91s/it][A
 79%|███████▉  | 58/73 [01:52<00:28,  1.91s/it][A
 81%|████████  | 59/73 [01:54<00:26,  1.91s/it][A
 82%|████████▏ | 60/73 [01:56<00:24,  1.91s/it][A
 84%|████████▎ | 61/73 [01:58<00:22,  1.91s/it][A
 85%|████████▍ | 62/73 [02:00<00:21,  1.91s/it][A
 86%|████████▋ | 63/73 [02:02<00:19,  1.90s/it][A
 88%|████████▊ | 64/73 [02:03<00:17,  1.92s/it][A
 89%|████████▉ | 65/73 [02:05<00:15,  1.91s/it][A
 90%|█████████ | 66/73 [02:07<00:13,  1.91s/it][A
 92%|█████████▏| 67/73 [02:09<00:11,  1.90s/it][A
 93%|█████████▎| 68/73 [02:11<00:09,  1.90s/it][A
 95%|█████████▍| 69/73 [02:13<00:07,  1.90s/it][A
 96%|█████████▌| 70/73 [02:15<00:05,  1.90s/it][A
 97%|█████████▋| 71/73 [02:17<00:03,  1.90s/it][A
 99%|█████████▊| 72/73 [02:19<00:01,  1.90s/it][A
100%|██████████| 73/73 [02:20<00:00,  1.78s/it][A100%|██████████| 73/73 [02:20<00:00,  1.93s/it]
100%|██████████| 4/4 [05:38<00:00, 94.74s/it]100%|██████████| 4/4 [05:38<00:00, 84.64s/it]

computing features for ../202502WSI/tst_features/phikon_v2_features/h5_files/BRACS_1286.h5 took 140.73430347442627 s
features size:  (37280, 1024)
coordinates size:  (37280, 2)
